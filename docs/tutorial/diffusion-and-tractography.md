## Diffusion-weighted MRI, Tractography and Tractometry.
This page highlights some of the most common processing pipelines to analyze diffusion-weighted MRI and white matter as used and developed by the brainlife.io team.

### Ensemble tractography Single-Shell Diffusion and Tractography Processing.
The goal of this pipeline is to process dMRI and T1w data so to generate tract profiles using the Diffusion Tensor (DTI) model. This pipeline combines processing proposed by Caiafa and Pestilli, Scientific Reports (2017), Yeatman et al., PloS One (2012) and Takemura et al., PLoS Computational Biology (2016).

The pipeline is optimized for single-shell dMRI data. This pipeline should not be used for multishell data.

##### 1. Brain Parcellation (FreeSurfer).
The first step is to launch FreeSurfer, this will perform anatomical preprocessing and parcellate the brain into different regions: https://doi.org/10.25663/bl.app.0

##### 2. Diffusion MRI Preprocessing (VISTASOFT).
A commonly used pipeline for dMRI processing is called dtiInit. Originally developed by VistaLab at Stanford Universty this processing will align the dMRI data to the T1w data, reorient the BVECS accordingly, remove motion artifacts, and reduce Eddy- Current artifacts.
https://doi.org/10.25663/bl.app.3

##### 3. Generate Diffusion Tensor Model data.
Once the dMRI data have been processed. We need to generate the parameters for the DTI model. These have been generated by the previous step, the following App extracts the parameters and make them availble to build tract profiles.
https://doi.org/10.25663/bl.app.48 

##### 4. Tractography (Ensemble Tractography).
The ensemble tractography App will take as the output of the Diffusion MRi preprocessing App and perform tracking using a variety of parameters and combining Probabilistic as well as deterministic tracking. 
https://doi.org/10.25663/bl.app.33

##### 3. Segment white matter Tracts (AFQ).
Once the dMRI and T1w data are preprocessed, tracking has been generated, we can now segment the tractogram (whole brain fiber group) into major white matter tracts such as the Arcuate Fasciculus, Corticospinal Tract, Etc.
https://doi.org/10.25663/bl.app.13

##### 4. Measure Tract Profiles (VISTASOFT).
Tract profiles will allow measuring the properties of the brain tissue along the major white matter tracts generated in the previous step. These are ultimately the measurements the investigator will want to use to understand brain function by comparing the values across individuals.
https://doi.org/10.25663/bl.app.43

##### Note. 
The above pipeline assumes that your data are compliant with VISTASOFT or the Human Connectome Project pipeline and that your data is in LAS and the BVECS / BVALS are normalized. If your data does not comply with the above you can run the following steps before Step 1.

###### 0.1 Check BVECS and BVALS.
https://doi.org/10.25663/bl.app.85

###### 0.2 Reorient BVECS and Normalize BVALS (if suggested by the previous step).
https://doi.org/10.25663/bl.app.4

###### 0.3 Select a shell to run your tracking.
https://doi.org/10.25663/bl.app.17

### Ensemble tractography Multishell Diffusion Processing using DESIGNER
This pipeline combines processing proposed by Ades-Aron et al., Neuroimage (2018) and Takemura et al., PLoS Computational Biology (2016).

1. Brain Parcellation (FreeSurfer).
https://doi.org/10.25663/bl.app.0

2. Diffusion MRI Preprocessing (DESIGNER).
https://doi.org/10.25663/bl.app.68

3. Tractography (Ensemble Tractography).
https://doi.org/10.25663/bl.app.101
This also generates a DTI fit.

3. Segment white matter Tracts (AFQ).
https://doi.org/10.25663/bl.app.13

4. Measure Tract Profiles (VISTASOFT).
https://doi.org/10.25663/bl.app.43

5.1 Advanced: Generate NODDI model parameters.
https://doi.org/10.25663/brainlife.app.117

5.2 Advanced: Generate DKI model parameters.
https://doi.org/10.25663/bl.app.9
https://doi.org/10.25663/bl.app.70

### TractSeg Diffusion Processing
This pipeline combines processing proposed by Wasserthal et al., Neuroimage (2018) with processing proposed by Yeatman et al., PLoS One (2012).

1. Brain Parcellation (FreeSurfer).
https://doi.org/10.25663/bl.app.0

2. Segment major white matter tracts and volumes (TractSeg).
https://doi.org/10.25663/bl.app.95

3. Fit Diffusion Tensor model.
https://doi.org/10.25663/brainlife.app.137
https://doi.org/10.25663/bl.app.60

4. Measure Tract Profiles (VISTASOFT).
https://doi.org/10.25663/bl.app.43


This pipeline assumes that your data are compliant with the Human Connectome Project pipeline and that your data is in LAS and the BVECS / BVALS are normalized. If your data does not comply with the above you can run the following steps before Step 1.

0.1 Check BVECS and BVALS.
https://doi.org/10.25663/bl.app.85

0.2 Reorient BVECS and Normalize BVALS (if suggested by the previous step).
https://doi.org/10.25663/bl.app.4

0.3 Select a shell to run your tracking.
https://doi.org/10.25663/bl.app.17
